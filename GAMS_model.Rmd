---
title: "GAMs"
author: "ClareCallahan"
date: "4/7/2021"
output: html_document
---

```{r}
loadlibs = function(libs) {
  for(lib in libs) {
    class(lib)
    if(!do.call(require,as.list(lib))) {install.packages(lib)}
    do.call(require,as.list(lib))
  }
}
libs = c("tidyverse","data.table","stargazer", "knitr", "shiny",
         "tidymodels", "lubridate", "rpart.plot", "caret", "e1071",
         "readxl", "fuzzyjoin", "mgcv")
loadlibs(libs)

```


```{r setup, include=FALSE}
setwd("~/GitHub/Covid-19-Closure-Impact/Data")

df<-read.csv('Covid_Pred.csv')
df$submission_date<-as.Date(df$submission_date, format="%m/%d/%Y")
#df$submission_date<- as.Date(as.character(df$submission_date), format="%m/%d/%Y")

df%>% 
  group_by(state)%>%
  group_by(year = year(submission_date), week = week(submission_date )) %>% 
  summarise_if(is.numeric, sum)

```


##Need to pull in best features from Random Forest

```{r}

plot
gam_mod<-gam(new_cases ~ s(Population_density), data=df)
gam_mod<-gam(new_cases~ . , data=df)

plot(gam_mod, residuals = TRUE, pch = 1)
```


