---
title: "Baseline Model Exploration"
date: "3/26/2021"
output: html_document
---

```{r, warning = FALSE, message = FALSE}
library(tidyverse)
library(lubridate)
library(ggcorrplot)
library(GGally)

options(scipen = 999)

#read in 14 days .csv file
working_df <- read.csv("working_14days.csv")
```



##Baseline Model Analysis

## Model 1: Regularized (L1 - LASSO) Linear Regression Model



### Step 1: Clean up the data on the demographic indicators


```{r}
names(working_df)
```



```{r}

#remove 15:22

#convert the demographic information to 
working_df_subset <-
  working_df %>% 
  select(-c(1,18:35, 37:39, 45:60)) %>% 
  #converting the percentages in the control variables
  mutate(Male = as.character(Male), 
         Male = str_remove_all(Male, "%"), 
         per.male = as.numeric(Male),
         
         Female = as.character(Female), 
         Female  = str_remove_all(Female , "%"), 
         per.female = as.numeric(Female),
    
         X65.years.and.over = as.character(X65.years.and.over), 
         X65.years.and.over = str_remove_all(X65.years.and.over, "%"), 
         per.65.and.over = as.numeric(X65.years.and.over),
         
         White = as.character(White), #change the demographic information to characters
         White = str_remove_all(White, "%"), #removes the percentage signs
         per.white = as.numeric(White), #converts to a numeric number (which is a percentage already)
         
         Black.or.African.American = as.character(Black.or.African.American), 
         Black.or.African.American = str_remove_all(Black.or.African.American , "%"), 
         per.black = as.numeric(Black.or.African.American),
         
         American.Indian.and.Alaska.Native = as.character(American.Indian.and.Alaska.Native), 
         American.Indian.and.Alaska.Native = str_remove_all(American.Indian.and.Alaska.Native , "%"), 
         per.amer.ind = as.numeric(American.Indian.and.Alaska.Native),
         
         Asian = as.character(Asian), 
         Asian = str_remove_all(Asian , "%"), 
         per.asian = as.numeric(Asian),
         
         
         ) 
 # mutate(per.white  = White/Total.population)
#names(working_df_subset)

```

### Check for Collinearity

Step 2: Select 14 days before and 14 days after the first policy was implemented for the time range
Step 3: Split the data into a training and testing set
Step 4: Apply LASSO regularization (L1 regularization) to select the important control variables 
Step 5: Re-run linear regression to get coefficient estimates on the variables that are interpretable
Step 6: After the control-only baseline model was run, then the user would be able to select the non-pharmaceutical interventions that they want 




```{r}

names(working_df)

#do we need the date of the closures/openings once we've used them to create the binary variables?
#there is some demographic information that I think that we can eliminate as well


#how do we take the time dimension into account?

# working_df_subset %>% 
  working_df

```








